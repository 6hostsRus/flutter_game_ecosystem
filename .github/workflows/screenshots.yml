name: Generate Screenshots
on:
     repository_dispatch:
          types: [screenshots]
     workflow_dispatch:
jobs:
     android:
          runs-on: ubuntu-latest
          steps:
               - uses: actions/checkout@v4
               - name: Read Flutter pin
                 id: flutter_pin
                 run: |
                      if [ -f .github/flutter_version.txt ]; then echo "FLUTTER_VERSION=$(cat .github/flutter_version.txt)" >> $GITHUB_OUTPUT; else echo "FLUTTER_VERSION=stable" >> $GITHUB_OUTPUT; fi
               - uses: subosito/flutter-action@v2
                 with:
                      flutter-version: ${{ steps.flutter_pin.outputs.FLUTTER_VERSION }}
               - name: Android emulator (headless) & capture
                 run: |
                      echo "Stub: implement instrumentation tests to capture screenshots"
               - name: Upload artifact
                 uses: actions/upload-artifact@v4
                 with:
                      name: android-screenshots
                      path: assets/store/android/**
     ios:
          runs-on: macos-latest
          steps:
               - uses: actions/checkout@v4
               - name: Fastlane snapshot (stub)
                 run: |
                      gem install fastlane
                      echo "Stub: add Fastfile and Snapfile to drive iOS screenshots"
               - uses: actions/upload-artifact@v4
                 with:
                      name: ios-screenshots
                      path: assets/store/ios/**
